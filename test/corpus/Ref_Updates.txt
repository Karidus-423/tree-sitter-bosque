=======================================
Simple Ref Updates 1
=======================================

entity Foo {
	field x: Int;
}

function main(): Int {
	var v = Foo{1i};
	ref v[x = 2i];
	return v.x;
}

---

(source_file
  (entity_declaration
    (identifier)
    (object_body
      (field_statement
        (variable_expression
          (variable_signature
            (identifier)
            (primitive_type))))))
  (function_definition
    (function_signature
      (identifier)
      (function_parameters)
      (function_return_parameters
        (primitive_type))
      (function_usage
        (object_body
          (variable_statement
            (variable_expression
              (variable_signature
                (identifier))
              (variable_assignment
                (object_creation
                  (identifier)
                  (num_whole)))))
          (expression_statement
            (object_update
              (identifier
                (modifier))
              (object_update_block
                (variable_expression
                  (variable_signature
                    (identifier))
                  (variable_assignment
                    (num_whole))))))
          (return_statement
            (access_expression
              (identifier)
              (identifier))))))))

=======================================
Simple Ref Updates 2
=======================================

entity Foo {
	field x: Int;
}

function main(): Int {
	var v = Foo{1i};
	ref v[x = $x + 1i];
	return v.x;
}

---

(source_file
  (entity_declaration
    (identifier)
    (object_body
      (field_statement
        (variable_expression
          (variable_signature
            (identifier)
            (primitive_type))))))
  (function_definition
    (function_signature
      (identifier)
      (function_parameters)
      (function_return_parameters
        (primitive_type))
      (function_usage
        (object_body
          (variable_statement
            (variable_expression
              (variable_signature
                (identifier))
              (variable_assignment
                (object_creation
                  (identifier)
                  (num_whole)))))
          (expression_statement
            (object_update
              (identifier
                (modifier))
              (object_update_block
                (variable_expression
                  (variable_signature
                    (identifier))
                  (variable_assignment
                    (binary_expression
                      (identifier
                        (modifier))
                      (num_whole)))))))
          (return_statement
            (access_expression
              (identifier)
              (identifier))))))))
