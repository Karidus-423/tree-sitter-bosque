=======================================
Simple Ref Updates 1
=======================================

entity Foo {
	field x: Int;
}

function main(): Int {
	var v = Foo{1i};
	ref v[x = 2i];
	return v.x;
}

---

(source_file
  (entity
    (identifier)
    (field
      (identifier)
      (primitive_type)))
  (function_definition
    (function_modifier)
    (function_signature
      (identifier)
      (function_parameters)
      (function_return_parameters
        (primitive_type))
      (function_body
        (variable_statement
          (variable_expression
            (variable_definition
              (identifier))
            (type_definition
              (identifier)
              (num_whole))))
        (expression_statement
          (entity_update
            (identifier
              (modifier))
            (variable_redefinition
              (variable_definition
                (identifier)))
            (num_whole)))
        (return_statement
          (access_expression
            (identifier)
            (identifier)))))))

=======================================
Simple Ref Updates 2
=======================================

entity Foo {
	field x: Int;
}

function main(): Int {
	var v = Foo{1i};
	ref v[x = $x + 1i];
	return v.x;
}

---

(source_file
  (entity
    (identifier)
    (field
      (identifier)
      (primitive_type)))
  (function_definition
    (function_modifier)
    (function_signature
      (identifier)
      (function_parameters)
      (function_return_parameters
        (primitive_type))
      (function_body
        (variable_statement
          (variable_expression
            (variable_definition
              (identifier))
            (type_definition
              (identifier)
              (num_whole))))
        (expression_statement
          (entity_update
            (identifier
              (modifier))
            (variable_redefinition
              (variable_definition
                (identifier)))
            (binary_expression
              (identifier
                (modifier))
              (num_whole))))
        (return_statement
          (access_expression
            (identifier)
            (identifier)))))))
