==================================
Nbody Position and Velocity
==================================

%%
%%This is a bosque nbody implementation of https://benchmarksgame-team.pages.debian.net/benchmarksgame/performance/nbody.html.
%%

declare namespace Main;

entity Position {
    field x: Float;
    field y: Float;
    field z: Float;
}

entity Velocity {
    field vx: Float;
    field vy: Float;
    field vz: Float;
}

---

(source_file
  (comment)
  (comment)
  (comment)
  (namespace
    (identifier))
  (entity_declaration
    (custom_type)
    (object_body
      (field_statement
        (variable_expression
          (variable_signature
            (identifier)
            (primitive_type))))
      (field_statement
        (variable_expression
          (variable_signature
            (identifier)
            (primitive_type))))
      (field_statement
        (variable_expression
          (variable_signature
            (identifier)
            (primitive_type))))))
  (entity_declaration
    (custom_type)
    (object_body
      (field_statement
        (variable_expression
          (variable_signature
            (identifier)
            (primitive_type))))
      (field_statement
        (variable_expression
          (variable_signature
            (identifier)
            (primitive_type))))
      (field_statement
        (variable_expression
          (variable_signature
            (identifier)
            (primitive_type)))))))

==================================
Nbody Body
==================================

entity Body {
    const solar_mass: Float = 4.0f * Float::pi * Float::pi;
    const days_per_year: Float = 365.24f;

    field name: CString;
    field mass: Float;
    field pos: Position;
    field vel: Velocity;

    const jupiter: Body = Body{
        'jupiter',
        0.000954791938424326609f * Body::solar_mass,
        Position{
            4.84143144246472090f,
            -1.16032004402742839f,
            -0.103622044471123109f
        },
        Velocity{
            0.00166007664274403694f * Body::days_per_year,
            0.00769901118419740425f * Body::days_per_year,
            -0.0000690460016972063023f * Body::days_per_year
        }
    };

    const saturn: Body = Body{
        'saturn',
        0.000285885980666130812f * Body::solar_mass,
        Position{
            8.34336671824457987f,
            4.12479856412430479f,
            -0.403523417114321381f
        },
        Velocity{
            -0.00276742510726862411f * Body::days_per_year,
            0.00499852801234917238f * Body::days_per_year,
            0.0000230417297573763929f * Body::days_per_year
        }
    };

    const uranus: Body = Body{
        'uranus',
        0.0000436624404335156298f * Body::solar_mass,
        Position{
            12.8943695621391310f,
            -15.1111514016986312f,
            -0.223307578892655734f
        },
        Velocity{
            0.00296460137564761618f * Body::days_per_year,
            0.00237847173959480950f * Body::days_per_year,
            -0.0000296589568540237556f * Body::days_per_year
        }
    };

    const neptune: Body = Body{
        'neptune',
        0.0000515138902046611451f * Body::solar_mass,
        Position{
            15.3796971148509165f,
            -25.9193146099879641f,
            0.179258772950371181f
        },
        Velocity{
            0.00268067772490389322f * Body::days_per_year,
            0.00162824170038242295f * Body::days_per_year,
            -0.0000951592254519715870f * Body::days_per_year
        }
    };

    const sun: Body = Body{
        'sun',
        Body::solar_mass,
        Position{
            0.0f,
            0.0f,
            0.0f
        },
        Velocity{
            0.0f,
            0.0f,
            0.0f
        }
    };

    method offsetMomentum(px: Float, py: Float, pz: Float): Body {
        return Body{
            this.name,
            this.mass,
            this.pos, 
            Velocity{
                -px // Body::solar_mass, 
                -py // Body::solar_mass, 
                -pz // Body::solar_mass
            }
        };
    }

    method kineticEnergy(): Float {
        return 0.5f * this.mass * (Float::square(this.vel.vx) + Float::square(this.vel.vy) + Float::square(this.vel.vz));
    }

    function distance(b0: Body, b1: Body): Float {
        let dx = b0.pos.x - b1.pos.x;
        let dy = b0.pos.y - b1.pos.y;
        let dz = b0.pos.z - b1.pos.z;

        return Float::sqrt(Float::square(dx) + Float::square(dy) + Float::square(dz));
    }
}

---

(source_file
  (entity_declaration
    (custom_type)
    (object_body
      (variable_statement
        (variable_expression
          (variable_signature
            (identifier)
            (primitive_type))
          (variable_assignment
            (binary_expression
              (num_float)
              (namespace_access_expression
                (primitive_type)
                (binary_expression
                  (identifier)
                  (namespace_access_expression
                    (primitive_type)
                    (identifier))))))))
      (variable_statement
        (variable_expression
          (variable_signature
            (identifier)
            (primitive_type))
          (variable_assignment
            (num_float))))
      (field_statement
        (variable_expression
          (variable_signature
            (identifier)
            (primitive_type))))
      (field_statement
        (variable_expression
          (variable_signature
            (identifier)
            (primitive_type))))
      (field_statement
        (variable_expression
          (variable_signature
            (identifier)
            (custom_type))))
      (field_statement
        (variable_expression
          (variable_signature
            (identifier)
            (custom_type))))
      (variable_statement
        (variable_expression
          (variable_signature
            (identifier)
            (custom_type))
          (variable_assignment
            (object_creation
              (custom_type)
              (cstring)
              (binary_expression
                (num_float)
                (namespace_access_expression
                  (custom_type)
                  (identifier)))
              (object_creation
                (custom_type)
                (num_float)
                (num_float)
                (num_float))
              (object_creation
                (custom_type)
                (binary_expression
                  (num_float)
                  (namespace_access_expression
                    (custom_type)
                    (identifier)))
                (binary_expression
                  (num_float)
                  (namespace_access_expression
                    (custom_type)
                    (identifier)))
                (binary_expression
                  (num_float)
                  (namespace_access_expression
                    (custom_type)
                    (identifier))))))))
      (variable_statement
        (variable_expression
          (variable_signature
            (identifier)
            (custom_type))
          (variable_assignment
            (object_creation
              (custom_type)
              (cstring)
              (binary_expression
                (num_float)
                (namespace_access_expression
                  (custom_type)
                  (identifier)))
              (object_creation
                (custom_type)
                (num_float)
                (num_float)
                (num_float))
              (object_creation
                (custom_type)
                (binary_expression
                  (num_float)
                  (namespace_access_expression
                    (custom_type)
                    (identifier)))
                (binary_expression
                  (num_float)
                  (namespace_access_expression
                    (custom_type)
                    (identifier)))
                (binary_expression
                  (num_float)
                  (namespace_access_expression
                    (custom_type)
                    (identifier))))))))
      (variable_statement
        (variable_expression
          (variable_signature
            (identifier)
            (custom_type))
          (variable_assignment
            (object_creation
              (custom_type)
              (cstring)
              (binary_expression
                (num_float)
                (namespace_access_expression
                  (custom_type)
                  (identifier)))
              (object_creation
                (custom_type)
                (num_float)
                (num_float)
                (num_float))
              (object_creation
                (custom_type)
                (binary_expression
                  (num_float)
                  (namespace_access_expression
                    (custom_type)
                    (identifier)))
                (binary_expression
                  (num_float)
                  (namespace_access_expression
                    (custom_type)
                    (identifier)))
                (binary_expression
                  (num_float)
                  (namespace_access_expression
                    (custom_type)
                    (identifier))))))))
      (variable_statement
        (variable_expression
          (variable_signature
            (identifier)
            (custom_type))
          (variable_assignment
            (object_creation
              (custom_type)
              (cstring)
              (binary_expression
                (num_float)
                (namespace_access_expression
                  (custom_type)
                  (identifier)))
              (object_creation
                (custom_type)
                (num_float)
                (num_float)
                (num_float))
              (object_creation
                (custom_type)
                (binary_expression
                  (num_float)
                  (namespace_access_expression
                    (custom_type)
                    (identifier)))
                (binary_expression
                  (num_float)
                  (namespace_access_expression
                    (custom_type)
                    (identifier)))
                (binary_expression
                  (num_float)
                  (namespace_access_expression
                    (custom_type)
                    (identifier))))))))
      (variable_statement
        (variable_expression
          (variable_signature
            (identifier)
            (custom_type))
          (variable_assignment
            (object_creation
              (custom_type)
              (cstring)
              (namespace_access_expression
                (custom_type)
                (identifier))
              (object_creation
                (custom_type)
                (num_float)
                (num_float)
                (num_float))
              (object_creation
                (custom_type)
                (num_float)
                (num_float)
                (num_float))))))
      (method_statement
        (function_signature
          (custom_type)
          (function_parameters
            (variable_expression
              (variable_signature
                (identifier)
                (primitive_type)))
            (variable_expression
              (variable_signature
                (identifier)
                (primitive_type)))
            (variable_expression
              (variable_signature
                (identifier)
                (primitive_type))))
          (function_return_parameters
            (custom_type))
          (function_usage
            (object_body
              (return_statement
                (object_creation
                  (custom_type)
                  (access_expression
                    (this)
                    (identifier))
                  (access_expression
                    (this)
                    (identifier))
                  (access_expression
                    (this)
                    (identifier))
                  (object_creation
                    (custom_type)
                    (binary_expression
                      (unary_expression
                        (identifier))
                      (namespace_access_expression
                        (custom_type)
                        (identifier)))
                    (binary_expression
                      (unary_expression
                        (identifier))
                      (namespace_access_expression
                        (custom_type)
                        (identifier)))
                    (binary_expression
                      (unary_expression
                        (identifier))
                      (namespace_access_expression
                        (custom_type)
                        (identifier))))))))))
      (method_statement
        (function_signature
          (custom_type)
          (function_parameters)
          (function_return_parameters
            (primitive_type))
          (function_usage
            (object_body
              (return_statement
                (access_expression
                  (binary_expression
                    (num_float)
                    (this))
                  (binary_expression
                    (identifier)
                    (parenthesized_expression
                      (namespace_access_expression
                        (primitive_type)
                        (binary_expression
                          (function_call
                            (custom_type)
                            (function_call_parameters
                              (access_expression
                                (access_expression
                                  (this)
                                  (identifier))
                                (identifier))))
                          (namespace_access_expression
                            (primitive_type)
                            (binary_expression
                              (function_call
                                (custom_type)
                                (function_call_parameters
                                  (access_expression
                                    (access_expression
                                      (this)
                                      (identifier))
                                    (identifier))))
                              (namespace_access_expression
                                (primitive_type)
                                (function_call
                                  (custom_type)
                                  (function_call_parameters
                                    (access_expression
                                      (access_expression
                                        (this)
                                        (identifier))
                                      (identifier)))))))))))))))))
      (function_definition
        (function_signature
          (custom_type)
          (function_parameters
            (variable_expression
              (variable_signature
                (identifier)
                (custom_type)))
            (variable_expression
              (variable_signature
                (identifier)
                (custom_type))))
          (function_return_parameters
            (primitive_type))
          (function_usage
            (object_body
              (variable_statement
                (variable_expression
                  (variable_signature
                    (identifier))
                  (variable_assignment
                    (access_expression
                      (access_expression
                        (access_expression
                          (access_expression
                            (identifier)
                            (identifier))
                          (binary_expression
                            (identifier)
                            (identifier)))
                        (identifier))
                      (identifier)))))
              (variable_statement
                (variable_expression
                  (variable_signature
                    (identifier))
                  (variable_assignment
                    (access_expression
                      (access_expression
                        (access_expression
                          (access_expression
                            (identifier)
                            (identifier))
                          (binary_expression
                            (identifier)
                            (identifier)))
                        (identifier))
                      (identifier)))))
              (variable_statement
                (variable_expression
                  (variable_signature
                    (identifier))
                  (variable_assignment
                    (access_expression
                      (access_expression
                        (access_expression
                          (access_expression
                            (identifier)
                            (identifier))
                          (binary_expression
                            (identifier)
                            (identifier)))
                        (identifier))
                      (identifier)))))
              (return_statement
                (namespace_access_expression
                  (primitive_type)
                  (function_call
                    (custom_type)
                    (function_call_parameters
                      (namespace_access_expression
                        (primitive_type)
                        (binary_expression
                          (function_call
                            (custom_type)
                            (function_call_parameters
                              (identifier)))
                          (namespace_access_expression
                            (primitive_type)
                            (binary_expression
                              (function_call
                                (custom_type)
                                (function_call_parameters
                                  (identifier)))
                              (namespace_access_expression
                                (primitive_type)
                                (function_call
                                  (custom_type)
                                  (function_call_parameters
                                    (identifier)))))))))))))))))))

==================================
Nbody System
==================================

entity NBodySystem {
    field bodies: List<Body>;
   
    const energypairs: List<List<(|Nat, Nat|)>> = List<List<(|Nat, Nat|)>>{
        List<(|Nat, Nat|)>{(|0n, 1n|), (|0n, 2n|), (|0n, 3n|), (|0n, 4n|)},
        List<(|Nat, Nat|)>{(|1n, 2n|), (|1n, 3n|), (|1n, 4n|)},
        List<(|Nat, Nat|)>{(|2n, 3n|), (|2n, 4n|)},
        List<(|Nat, Nat|)>{(|3n, 4n|)}
    };

    function create(): NBodySystem {
        let planets = List<Body>{
            Body::jupiter,
            Body::saturn,
            Body::uranus,
            Body::neptune
        };

        let px = planets.map<Float>(fn(p: Body): Float => p.vel.vx * p.mass).sum();
        let py = planets.map<Float>(fn(p: Body): Float => p.vel.vy * p.mass).sum();
        let pz = planets.map<Float>(fn(p: Body): Float => p.vel.vz * p.mass).sum();

        let allbodies = List<Body>{
            Body::sun.offsetMomentum(px, py, pz),
            Body::jupiter,
            Body::saturn,
            Body::uranus,
            Body::neptune
        };

        return NBodySystem{ allbodies };
    }

    method potentialEnergyCompute(ppairs: List<(|Nat, Nat|)>): Float {
        let potentialEnergies = ppairs.map<Float>(fn(bp: (|Nat, Nat|)): Float => {
            let b0 = this.bodies.get(bp.0);
            let b1 = this.bodies.get(bp.1);

            return (b0.mass * b1.mass) // Body::distance(b0, b1);
        });

        return potentialEnergies.sum();
    }

    method energy(): Float {
        let keneticEnergies = this.bodies.map<Float>(fn(b: Body): Float => b.kineticEnergy());
        let potentialEnergies = NBodySystem::energypairs.map<Float>(fn(pep: List<(|Nat, Nat|)>): Float => {
            return this.potentialEnergyCompute(pep);
        });

        return keneticEnergies.sum() - potentialEnergies.sum();
    }

    method advance(dt: Float): NBodySystem {
        let deltav = this.bodies.map<(|Body, Float, Float, Float|)>(fn(b: Body): (|Body, Float, Float, Float|) => {
            let forces = this.bodies.map<(|Float, Float, Float|)>(fn(ob: Body): (|Float, Float, Float|) => {
                if(b.name === ob.name) {
                    return (|0.0f, 0.0f, 0.0f|);
                }
                else {
                    let dx = ob.pos.x - b.pos.x;
                    let dy = ob.pos.y - b.pos.y;
                    let dz = ob.pos.z - b.pos.z;

                    let distance = Body::distance(ob, b);
                    let mag = dt // (distance * distance * distance);

                    return (|dx * ob.mass * mag, dy * ob.mass * mag, dz * ob.mass * mag|);
                }
            });

            let fx = b.vel.vx + forces.map<Float>(fn(fv: (|Float, Float, Float|)): Float => fv.0).sum();
            let fy = b.vel.vy + forces.map<Float>(fn(fv: (|Float, Float, Float|)): Float => fv.1).sum();
            let fz = b.vel.vz + forces.map<Float>(fn(fv: (|Float, Float, Float|)): Float => fv.2).sum();

            return (|b, fx, fy, fz|);
        });

        let bodies = deltav.map<Body>(fn(utuple: (|Body, Float, Float, Float|)): Body => {
            let b = utuple.0;

            let nvx = utuple.1;
            let nvy = utuple.2;
            let nvz = utuple.3;
            let nvel = Velocity{nvx, nvy, nvz};

            let nx = b.pos.x + (nvx * dt);
            let ny = b.pos.y + (nvy * dt);
            let nz = b.pos.z + (nvz * dt);
            let npos = Position{nx, ny, nz};

            return Body{b.name, b.mass, npos, nvel};
        });

        return NBodySystem{ bodies };
    }
}

---

(source_file
  (entity_declaration
    (custom_type)
    (object_body
      (field_statement
        (variable_expression
          (variable_signature
            (identifier)
            (list_type
              (type_params
                (custom_type))))))
      (variable_statement
        (variable_expression
          (variable_signature
            (identifier)
            (list_type
              (type_params
                (list_type
                  (type_params
                    (elist_type
                      (primitive_type)
                      (primitive_type)))))))
          (variable_assignment
            (object_creation
              (list_type
                (type_params
                  (list_type
                    (type_params
                      (elist_type
                        (primitive_type)
                        (primitive_type))))))
              (object_creation
                (list_type
                  (type_params
                    (elist_type
                      (primitive_type)
                      (primitive_type))))
                (elist_value
                  (num_whole)
                  (num_whole))
                (elist_value
                  (num_whole)
                  (num_whole))
                (elist_value
                  (num_whole)
                  (num_whole))
                (elist_value
                  (num_whole)
                  (num_whole)))
              (object_creation
                (list_type
                  (type_params
                    (elist_type
                      (primitive_type)
                      (primitive_type))))
                (elist_value
                  (num_whole)
                  (num_whole))
                (elist_value
                  (num_whole)
                  (num_whole))
                (elist_value
                  (num_whole)
                  (num_whole)))
              (object_creation
                (list_type
                  (type_params
                    (elist_type
                      (primitive_type)
                      (primitive_type))))
                (elist_value
                  (num_whole)
                  (num_whole))
                (elist_value
                  (num_whole)
                  (num_whole)))
              (object_creation
                (list_type
                  (type_params
                    (elist_type
                      (primitive_type)
                      (primitive_type))))
                (elist_value
                  (num_whole)
                  (num_whole)))))))
      (function_definition
        (function_signature
          (custom_type)
          (function_parameters)
          (function_return_parameters
            (custom_type))
          (function_usage
            (object_body
              (variable_statement
                (variable_expression
                  (variable_signature
                    (identifier))
                  (variable_assignment
                    (object_creation
                      (list_type
                        (type_params
                          (custom_type)))
                      (namespace_access_expression
                        (custom_type)
                        (identifier))
                      (namespace_access_expression
                        (custom_type)
                        (identifier))
                      (namespace_access_expression
                        (custom_type)
                        (identifier))
                      (namespace_access_expression
                        (custom_type)
                        (identifier))))))
              (variable_statement
                (variable_expression
                  (variable_signature
                    (identifier))
                  (variable_assignment
                    (access_expression
                      (access_expression
                        (identifier)
                        (function_call
                          (template
                            (custom_type)
                            (type_params
                              (primitive_type)))
                          (function_call_parameters
                            (access_expression
                              (access_expression
                                (access_expression
                                  (lambda_expression
                                    (function_call
                                      (custom_type)
                                      (function_call_parameters
                                        (variable_expression
                                          (variable_signature
                                            (identifier)
                                            (custom_type)))))
                                    (function_return_parameters
                                      (primitive_type))
                                    (identifier))
                                  (identifier))
                                (binary_expression
                                  (identifier)
                                  (identifier)))
                              (identifier)))))
                      (function_call
                        (custom_type)
                        (function_call_parameters))))))
              (variable_statement
                (variable_expression
                  (variable_signature
                    (identifier))
                  (variable_assignment
                    (access_expression
                      (access_expression
                        (identifier)
                        (function_call
                          (template
                            (custom_type)
                            (type_params
                              (primitive_type)))
                          (function_call_parameters
                            (access_expression
                              (access_expression
                                (access_expression
                                  (lambda_expression
                                    (function_call
                                      (custom_type)
                                      (function_call_parameters
                                        (variable_expression
                                          (variable_signature
                                            (identifier)
                                            (custom_type)))))
                                    (function_return_parameters
                                      (primitive_type))
                                    (identifier))
                                  (identifier))
                                (binary_expression
                                  (identifier)
                                  (identifier)))
                              (identifier)))))
                      (function_call
                        (custom_type)
                        (function_call_parameters))))))
              (variable_statement
                (variable_expression
                  (variable_signature
                    (identifier))
                  (variable_assignment
                    (access_expression
                      (access_expression
                        (identifier)
                        (function_call
                          (template
                            (custom_type)
                            (type_params
                              (primitive_type)))
                          (function_call_parameters
                            (access_expression
                              (access_expression
                                (access_expression
                                  (lambda_expression
                                    (function_call
                                      (custom_type)
                                      (function_call_parameters
                                        (variable_expression
                                          (variable_signature
                                            (identifier)
                                            (custom_type)))))
                                    (function_return_parameters
                                      (primitive_type))
                                    (identifier))
                                  (identifier))
                                (binary_expression
                                  (identifier)
                                  (identifier)))
                              (identifier)))))
                      (function_call
                        (custom_type)
                        (function_call_parameters))))))
              (variable_statement
                (variable_expression
                  (variable_signature
                    (identifier))
                  (variable_assignment
                    (object_creation
                      (list_type
                        (type_params
                          (custom_type)))
                      (access_expression
                        (namespace_access_expression
                          (custom_type)
                          (identifier))
                        (function_call
                          (custom_type)
                          (function_call_parameters
                            (identifier)
                            (identifier)
                            (identifier))))
                      (namespace_access_expression
                        (custom_type)
                        (identifier))
                      (namespace_access_expression
                        (custom_type)
                        (identifier))
                      (namespace_access_expression
                        (custom_type)
                        (identifier))
                      (namespace_access_expression
                        (custom_type)
                        (identifier))))))
              (return_statement
                (object_creation
                  (custom_type)
                  (identifier)))))))
      (method_statement
        (function_signature
          (custom_type)
          (function_parameters
            (variable_expression
              (variable_signature
                (identifier)
                (list_type
                  (type_params
                    (elist_type
                      (primitive_type)
                      (primitive_type)))))))
          (function_return_parameters
            (primitive_type))
          (function_usage
            (object_body
              (variable_statement
                (variable_expression
                  (variable_signature
                    (identifier))
                  (variable_assignment
                    (access_expression
                      (identifier)
                      (function_call
                        (template
                          (custom_type)
                          (type_params
                            (primitive_type)))
                        (function_call_parameters
                          (lambda_expression
                            (function_call
                              (custom_type)
                              (function_call_parameters
                                (variable_expression
                                  (variable_signature
                                    (identifier)
                                    (elist_type
                                      (primitive_type)
                                      (primitive_type))))))
                            (function_return_parameters
                              (primitive_type))
                            (object_body
                              (variable_statement
                                (variable_expression
                                  (variable_signature
                                    (identifier))
                                  (variable_assignment
                                    (access_expression
                                      (access_expression
                                        (this)
                                        (identifier))
                                      (function_call
                                        (custom_type)
                                        (function_call_parameters
                                          (access_expression
                                            (identifier)
                                            (num_whole))))))))
                              (variable_statement
                                (variable_expression
                                  (variable_signature
                                    (identifier))
                                  (variable_assignment
                                    (access_expression
                                      (access_expression
                                        (this)
                                        (identifier))
                                      (function_call
                                        (custom_type)
                                        (function_call_parameters
                                          (access_expression
                                            (identifier)
                                            (num_whole))))))))
                              (return_statement
                                (binary_expression
                                  (parenthesized_expression
                                    (access_expression
                                      (access_expression
                                        (identifier)
                                        (binary_expression
                                          (identifier)
                                          (identifier)))
                                      (identifier)))
                                  (namespace_access_expression
                                    (custom_type)
                                    (function_call
                                      (custom_type)
                                      (function_call_parameters
                                        (identifier)
                                        (identifier))))))))))))))
              (return_statement
                (access_expression
                  (identifier)
                  (function_call
                    (custom_type)
                    (function_call_parameters))))))))
      (method_statement
        (function_signature
          (custom_type)
          (function_parameters)
          (function_return_parameters
            (primitive_type))
          (function_usage
            (object_body
              (variable_statement
                (variable_expression
                  (variable_signature
                    (identifier))
                  (variable_assignment
                    (access_expression
                      (access_expression
                        (this)
                        (identifier))
                      (function_call
                        (template
                          (custom_type)
                          (type_params
                            (primitive_type)))
                        (function_call_parameters
                          (access_expression
                            (lambda_expression
                              (function_call
                                (custom_type)
                                (function_call_parameters
                                  (variable_expression
                                    (variable_signature
                                      (identifier)
                                      (custom_type)))))
                              (function_return_parameters
                                (primitive_type))
                              (identifier))
                            (function_call
                              (custom_type)
                              (function_call_parameters)))))))))
              (variable_statement
                (variable_expression
                  (variable_signature
                    (identifier))
                  (variable_assignment
                    (access_expression
                      (namespace_access_expression
                        (custom_type)
                        (identifier))
                      (function_call
                        (template
                          (custom_type)
                          (type_params
                            (primitive_type)))
                        (function_call_parameters
                          (lambda_expression
                            (function_call
                              (custom_type)
                              (function_call_parameters
                                (variable_expression
                                  (variable_signature
                                    (identifier)
                                    (list_type
                                      (type_params
                                        (elist_type
                                          (primitive_type)
                                          (primitive_type))))))))
                            (function_return_parameters
                              (primitive_type))
                            (object_body
                              (return_statement
                                (access_expression
                                  (this)
                                  (function_call
                                    (custom_type)
                                    (function_call_parameters
                                      (identifier)))))))))))))
              (return_statement
                (access_expression
                  (access_expression
                    (identifier)
                    (binary_expression
                      (function_call
                        (custom_type)
                        (function_call_parameters))
                      (identifier)))
                  (function_call
                    (custom_type)
                    (function_call_parameters))))))))
      (method_statement
        (function_signature
          (custom_type)
          (function_parameters
            (variable_expression
              (variable_signature
                (identifier)
                (primitive_type))))
          (function_return_parameters
            (custom_type))
          (function_usage
            (object_body
              (variable_statement
                (variable_expression
                  (variable_signature
                    (identifier))
                  (variable_assignment
                    (access_expression
                      (access_expression
                        (this)
                        (identifier))
                      (function_call
                        (template
                          (custom_type)
                          (type_params
                            (elist_type
                              (custom_type)
                              (primitive_type)
                              (primitive_type)
                              (primitive_type))))
                        (function_call_parameters
                          (lambda_expression
                            (function_call
                              (custom_type)
                              (function_call_parameters
                                (variable_expression
                                  (variable_signature
                                    (identifier)
                                    (custom_type)))))
                            (function_return_parameters
                              (elist_type
                                (custom_type)
                                (primitive_type)
                                (primitive_type)
                                (primitive_type)))
                            (object_body
                              (variable_statement
                                (variable_expression
                                  (variable_signature
                                    (identifier))
                                  (variable_assignment
                                    (access_expression
                                      (access_expression
                                        (this)
                                        (identifier))
                                      (function_call
                                        (template
                                          (custom_type)
                                          (type_params
                                            (elist_type
                                              (primitive_type)
                                              (primitive_type)
                                              (primitive_type))))
                                        (function_call_parameters
                                          (lambda_expression
                                            (function_call
                                              (custom_type)
                                              (function_call_parameters
                                                (variable_expression
                                                  (variable_signature
                                                    (identifier)
                                                    (custom_type)))))
                                            (function_return_parameters
                                              (elist_type
                                                (primitive_type)
                                                (primitive_type)
                                                (primitive_type)))
                                            (object_body
                                              (if_statement
                                                (access_expression
                                                  (access_expression
                                                    (identifier)
                                                    (binary_expression
                                                      (identifier)
                                                      (identifier)))
                                                  (identifier))
                                                (return_statement
                                                  (elist_value
                                                    (num_float)
                                                    (num_float)
                                                    (num_float)))
                                                (variable_statement
                                                  (variable_expression
                                                    (variable_signature
                                                      (identifier))
                                                    (variable_assignment
                                                      (access_expression
                                                        (access_expression
                                                          (access_expression
                                                            (access_expression
                                                              (identifier)
                                                              (identifier))
                                                            (binary_expression
                                                              (identifier)
                                                              (identifier)))
                                                          (identifier))
                                                        (identifier)))))
                                                (variable_statement
                                                  (variable_expression
                                                    (variable_signature
                                                      (identifier))
                                                    (variable_assignment
                                                      (access_expression
                                                        (access_expression
                                                          (access_expression
                                                            (access_expression
                                                              (identifier)
                                                              (identifier))
                                                            (binary_expression
                                                              (identifier)
                                                              (identifier)))
                                                          (identifier))
                                                        (identifier)))))
                                                (variable_statement
                                                  (variable_expression
                                                    (variable_signature
                                                      (identifier))
                                                    (variable_assignment
                                                      (access_expression
                                                        (access_expression
                                                          (access_expression
                                                            (access_expression
                                                              (identifier)
                                                              (identifier))
                                                            (binary_expression
                                                              (identifier)
                                                              (identifier)))
                                                          (identifier))
                                                        (identifier)))))
                                                (variable_statement
                                                  (variable_expression
                                                    (variable_signature
                                                      (identifier))
                                                    (variable_assignment
                                                      (namespace_access_expression
                                                        (custom_type)
                                                        (function_call
                                                          (custom_type)
                                                          (function_call_parameters
                                                            (identifier)
                                                            (identifier)))))))
                                                (variable_statement
                                                  (variable_expression
                                                    (variable_signature
                                                      (identifier))
                                                    (variable_assignment
                                                      (binary_expression
                                                        (identifier)
                                                        (parenthesized_expression
                                                          (binary_expression
                                                            (binary_expression
                                                              (identifier)
                                                              (identifier))
                                                            (identifier)))))))
                                                (return_statement
                                                  (elist_value
                                                    (access_expression
                                                      (binary_expression
                                                        (identifier)
                                                        (identifier))
                                                      (binary_expression
                                                        (identifier)
                                                        (identifier)))
                                                    (access_expression
                                                      (binary_expression
                                                        (identifier)
                                                        (identifier))
                                                      (binary_expression
                                                        (identifier)
                                                        (identifier)))
                                                    (access_expression
                                                      (binary_expression
                                                        (identifier)
                                                        (identifier))
                                                      (binary_expression
                                                        (identifier)
                                                        (identifier))))))))))))))
                              (variable_statement
                                (variable_expression
                                  (variable_signature
                                    (identifier))
                                  (variable_assignment
                                    (access_expression
                                      (access_expression
                                        (access_expression
                                          (access_expression
                                            (identifier)
                                            (identifier))
                                          (binary_expression
                                            (identifier)
                                            (identifier)))
                                        (function_call
                                          (template
                                            (custom_type)
                                            (type_params
                                              (primitive_type)))
                                          (function_call_parameters
                                            (access_expression
                                              (lambda_expression
                                                (function_call
                                                  (custom_type)
                                                  (function_call_parameters
                                                    (variable_expression
                                                      (variable_signature
                                                        (identifier)
                                                        (elist_type
                                                          (primitive_type)
                                                          (primitive_type)
                                                          (primitive_type))))))
                                                (function_return_parameters
                                                  (primitive_type))
                                                (identifier))
                                              (num_whole)))))
                                      (function_call
                                        (custom_type)
                                        (function_call_parameters))))))
                              (variable_statement
                                (variable_expression
                                  (variable_signature
                                    (identifier))
                                  (variable_assignment
                                    (access_expression
                                      (access_expression
                                        (access_expression
                                          (access_expression
                                            (identifier)
                                            (identifier))
                                          (binary_expression
                                            (identifier)
                                            (identifier)))
                                        (function_call
                                          (template
                                            (custom_type)
                                            (type_params
                                              (primitive_type)))
                                          (function_call_parameters
                                            (access_expression
                                              (lambda_expression
                                                (function_call
                                                  (custom_type)
                                                  (function_call_parameters
                                                    (variable_expression
                                                      (variable_signature
                                                        (identifier)
                                                        (elist_type
                                                          (primitive_type)
                                                          (primitive_type)
                                                          (primitive_type))))))
                                                (function_return_parameters
                                                  (primitive_type))
                                                (identifier))
                                              (num_whole)))))
                                      (function_call
                                        (custom_type)
                                        (function_call_parameters))))))
                              (variable_statement
                                (variable_expression
                                  (variable_signature
                                    (identifier))
                                  (variable_assignment
                                    (access_expression
                                      (access_expression
                                        (access_expression
                                          (access_expression
                                            (identifier)
                                            (identifier))
                                          (binary_expression
                                            (identifier)
                                            (identifier)))
                                        (function_call
                                          (template
                                            (custom_type)
                                            (type_params
                                              (primitive_type)))
                                          (function_call_parameters
                                            (access_expression
                                              (lambda_expression
                                                (function_call
                                                  (custom_type)
                                                  (function_call_parameters
                                                    (variable_expression
                                                      (variable_signature
                                                        (identifier)
                                                        (elist_type
                                                          (primitive_type)
                                                          (primitive_type)
                                                          (primitive_type))))))
                                                (function_return_parameters
                                                  (primitive_type))
                                                (identifier))
                                              (num_whole)))))
                                      (function_call
                                        (custom_type)
                                        (function_call_parameters))))))
                              (return_statement
                                (elist_value
                                  (identifier)
                                  (identifier)
                                  (identifier)
                                  (identifier)))))))))))
              (variable_statement
                (variable_expression
                  (variable_signature
                    (identifier))
                  (variable_assignment
                    (access_expression
                      (identifier)
                      (function_call
                        (template
                          (custom_type)
                          (type_params
                            (custom_type)))
                        (function_call_parameters
                          (lambda_expression
                            (function_call
                              (custom_type)
                              (function_call_parameters
                                (variable_expression
                                  (variable_signature
                                    (identifier)
                                    (elist_type
                                      (custom_type)
                                      (primitive_type)
                                      (primitive_type)
                                      (primitive_type))))))
                            (function_return_parameters
                              (custom_type))
                            (object_body
                              (variable_statement
                                (variable_expression
                                  (variable_signature
                                    (identifier))
                                  (variable_assignment
                                    (access_expression
                                      (identifier)
                                      (num_whole)))))
                              (variable_statement
                                (variable_expression
                                  (variable_signature
                                    (identifier))
                                  (variable_assignment
                                    (access_expression
                                      (identifier)
                                      (num_whole)))))
                              (variable_statement
                                (variable_expression
                                  (variable_signature
                                    (identifier))
                                  (variable_assignment
                                    (access_expression
                                      (identifier)
                                      (num_whole)))))
                              (variable_statement
                                (variable_expression
                                  (variable_signature
                                    (identifier))
                                  (variable_assignment
                                    (access_expression
                                      (identifier)
                                      (num_whole)))))
                              (variable_statement
                                (variable_expression
                                  (variable_signature
                                    (identifier))
                                  (variable_assignment
                                    (object_creation
                                      (custom_type)
                                      (identifier)
                                      (identifier)
                                      (identifier)))))
                              (variable_statement
                                (variable_expression
                                  (variable_signature
                                    (identifier))
                                  (variable_assignment
                                    (access_expression
                                      (access_expression
                                        (identifier)
                                        (identifier))
                                      (binary_expression
                                        (identifier)
                                        (parenthesized_expression
                                          (binary_expression
                                            (identifier)
                                            (identifier))))))))
                              (variable_statement
                                (variable_expression
                                  (variable_signature
                                    (identifier))
                                  (variable_assignment
                                    (access_expression
                                      (access_expression
                                        (identifier)
                                        (identifier))
                                      (binary_expression
                                        (identifier)
                                        (parenthesized_expression
                                          (binary_expression
                                            (identifier)
                                            (identifier))))))))
                              (variable_statement
                                (variable_expression
                                  (variable_signature
                                    (identifier))
                                  (variable_assignment
                                    (access_expression
                                      (access_expression
                                        (identifier)
                                        (identifier))
                                      (binary_expression
                                        (identifier)
                                        (parenthesized_expression
                                          (binary_expression
                                            (identifier)
                                            (identifier))))))))
                              (variable_statement
                                (variable_expression
                                  (variable_signature
                                    (identifier))
                                  (variable_assignment
                                    (object_creation
                                      (custom_type)
                                      (identifier)
                                      (identifier)
                                      (identifier)))))
                              (return_statement
                                (object_creation
                                  (custom_type)
                                  (access_expression
                                    (identifier)
                                    (identifier))
                                  (access_expression
                                    (identifier)
                                    (identifier))
                                  (identifier)
                                  (identifier)))))))))))
              (return_statement
                (object_creation
                  (custom_type)
                  (identifier))))))))))

==================================
Nbody Main
==================================

public function main(): Float {
    var system = NBodySystem::create();
    let step = 0.01f;

    system = system.advance(step);
    system = system.advance(step);
    system = system.advance(step);

    return system.energy();

    %%let system_end = Flows::while<(|Nat, NBodySystem|)>((|0n, system_start|), pred(state) => state.0 < iters, fn(state) => [state.0 + 1n, state.1.advance(step)]);
    %%return system_end.1.energy();
}


---

(source_file
  (function_definition
    (modifier)
    (function_signature
      (custom_type)
      (function_parameters)
      (function_return_parameters
        (primitive_type))
      (function_usage
        (object_body
          (variable_statement
            (variable_expression
              (variable_signature
                (identifier))
              (variable_assignment
                (namespace_access_expression
                  (custom_type)
                  (function_call
                    (custom_type)
                    (function_call_parameters))))))
          (variable_statement
            (variable_expression
              (variable_signature
                (identifier))
              (variable_assignment
                (num_float))))
          (expression_statement
            (access_expression
              (variable_expression
                (variable_signature
                  (identifier))
                (variable_assignment
                  (identifier)))
              (function_call
                (custom_type)
                (function_call_parameters
                  (identifier)))))
          (expression_statement
            (access_expression
              (variable_expression
                (variable_signature
                  (identifier))
                (variable_assignment
                  (identifier)))
              (function_call
                (custom_type)
                (function_call_parameters
                  (identifier)))))
          (expression_statement
            (access_expression
              (variable_expression
                (variable_signature
                  (identifier))
                (variable_assignment
                  (identifier)))
              (function_call
                (custom_type)
                (function_call_parameters
                  (identifier)))))
          (return_statement
            (access_expression
              (identifier)
              (function_call
                (custom_type)
                (function_call_parameters))))
          (comment)
          (comment))))))

==============================
Entire NBody
==============================
%%
%%This is a bosque nbody implementation of https://benchmarksgame-team.pages.debian.net/benchmarksgame/performance/nbody.html.
%%

declare namespace Main;

entity Position {
    field x: Float;
    field y: Float;
    field z: Float;
}

entity Velocity {
    field vx: Float;
    field vy: Float;
    field vz: Float;
}

entity Body {
    const solar_mass: Float = 4.0f * Float::pi * Float::pi;
    const days_per_year: Float = 365.24f;

    field name: CString;
    field mass: Float;
    field pos: Position;
    field vel: Velocity;

    const jupiter: Body = Body{
        'jupiter',
        0.000954791938424326609f * Body::solar_mass,
        Position{
            4.84143144246472090f,
            -1.16032004402742839f,
            -0.103622044471123109f
        },
        Velocity{
            0.00166007664274403694f * Body::days_per_year,
            0.00769901118419740425f * Body::days_per_year,
            -0.0000690460016972063023f * Body::days_per_year
        }
    };

    const saturn: Body = Body{
        'saturn',
        0.000285885980666130812f * Body::solar_mass,
        Position{
            8.34336671824457987f,
            4.12479856412430479f,
            -0.403523417114321381f
        },
        Velocity{
            -0.00276742510726862411f * Body::days_per_year,
            0.00499852801234917238f * Body::days_per_year,
            0.0000230417297573763929f * Body::days_per_year
        }
    };

    const uranus: Body = Body{
        'uranus',
        0.0000436624404335156298f * Body::solar_mass,
        Position{
            12.8943695621391310f,
            -15.1111514016986312f,
            -0.223307578892655734f
        },
        Velocity{
            0.00296460137564761618f * Body::days_per_year,
            0.00237847173959480950f * Body::days_per_year,
            -0.0000296589568540237556f * Body::days_per_year
        }
    };

    const neptune: Body = Body{
        'neptune',
        0.0000515138902046611451f * Body::solar_mass,
        Position{
            15.3796971148509165f,
            -25.9193146099879641f,
            0.179258772950371181f
        },
        Velocity{
            0.00268067772490389322f * Body::days_per_year,
            0.00162824170038242295f * Body::days_per_year,
            -0.0000951592254519715870f * Body::days_per_year
        }
    };

    const sun: Body = Body{
        'sun',
        Body::solar_mass,
        Position{
            0.0f,
            0.0f,
            0.0f
        },
        Velocity{
            0.0f,
            0.0f,
            0.0f
        }
    };

    method offsetMomentum(px: Float, py: Float, pz: Float): Body {
        return Body{
            this.name,
            this.mass,
            this.pos, 
            Velocity{
                -px // Body::solar_mass, 
                -py // Body::solar_mass, 
                -pz // Body::solar_mass
            }
        };
    }

    method kineticEnergy(): Float {
        return 0.5f * this.mass * (Float::square(this.vel.vx) + Float::square(this.vel.vy) + Float::square(this.vel.vz));
    }

    function distance(b0: Body, b1: Body): Float {
        let dx = b0.pos.x - b1.pos.x;
        let dy = b0.pos.y - b1.pos.y;
        let dz = b0.pos.z - b1.pos.z;

        return Float::sqrt(Float::square(dx) + Float::square(dy) + Float::square(dz));
    }
}

entity NBodySystem {
    field bodies: List<Body>;
   
    const energypairs: List<List<(|Nat, Nat|)>> = List<List<(|Nat, Nat|)>>{
        List<(|Nat, Nat|)>{(|0n, 1n|), (|0n, 2n|), (|0n, 3n|), (|0n, 4n|)},
        List<(|Nat, Nat|)>{(|1n, 2n|), (|1n, 3n|), (|1n, 4n|)},
        List<(|Nat, Nat|)>{(|2n, 3n|), (|2n, 4n|)},
        List<(|Nat, Nat|)>{(|3n, 4n|)}
    };

    function create(): NBodySystem {
        let planets = List<Body>{
            Body::jupiter,
            Body::saturn,
            Body::uranus,
            Body::neptune
        };

        let px = planets.map<Float>(fn(p: Body): Float => p.vel.vx * p.mass).sum();
        let py = planets.map<Float>(fn(p: Body): Float => p.vel.vy * p.mass).sum();
        let pz = planets.map<Float>(fn(p: Body): Float => p.vel.vz * p.mass).sum();

        let allbodies = List<Body>{
            Body::sun.offsetMomentum(px, py, pz),
            Body::jupiter,
            Body::saturn,
            Body::uranus,
            Body::neptune
        };

        return NBodySystem{ allbodies };
    }

    method potentialEnergyCompute(ppairs: List<(|Nat, Nat|)>): Float {
        let potentialEnergies = ppairs.map<Float>(fn(bp: (|Nat, Nat|)): Float => {
            let b0 = this.bodies.get(bp.0);
            let b1 = this.bodies.get(bp.1);

            return (b0.mass * b1.mass) // Body::distance(b0, b1);
        });

        return potentialEnergies.sum();
    }

    method energy(): Float {
        let keneticEnergies = this.bodies.map<Float>(fn(b: Body): Float => b.kineticEnergy());
        let potentialEnergies = NBodySystem::energypairs.map<Float>(fn(pep: List<(|Nat, Nat|)>): Float => {
            return this.potentialEnergyCompute(pep);
        });

        return keneticEnergies.sum() - potentialEnergies.sum();
    }

    method advance(dt: Float): NBodySystem {
        let deltav = this.bodies.map<(|Body, Float, Float, Float|)>(fn(b: Body): (|Body, Float, Float, Float|) => {
            let forces = this.bodies.map<(|Float, Float, Float|)>(fn(ob: Body): (|Float, Float, Float|) => {
                if(b.name === ob.name) {
                    return (|0.0f, 0.0f, 0.0f|);
                }
                else {
                    let dx = ob.pos.x - b.pos.x;
                    let dy = ob.pos.y - b.pos.y;
                    let dz = ob.pos.z - b.pos.z;

                    let distance = Body::distance(ob, b);
                    let mag = dt // (distance * distance * distance);

                    return (|dx * ob.mass * mag, dy * ob.mass * mag, dz * ob.mass * mag|);
                }
            });

            let fx = b.vel.vx + forces.map<Float>(fn(fv: (|Float, Float, Float|)): Float => fv.0).sum();
            let fy = b.vel.vy + forces.map<Float>(fn(fv: (|Float, Float, Float|)): Float => fv.1).sum();
            let fz = b.vel.vz + forces.map<Float>(fn(fv: (|Float, Float, Float|)): Float => fv.2).sum();

            return (|b, fx, fy, fz|);
        });

        let bodies = deltav.map<Body>(fn(utuple: (|Body, Float, Float, Float|)): Body => {
            let b = utuple.0;

            let nvx = utuple.1;
            let nvy = utuple.2;
            let nvz = utuple.3;
            let nvel = Velocity{nvx, nvy, nvz};

            let nx = b.pos.x + (nvx * dt);
            let ny = b.pos.y + (nvy * dt);
            let nz = b.pos.z + (nvz * dt);
            let npos = Position{nx, ny, nz};

            return Body{b.name, b.mass, npos, nvel};
        });

        return NBodySystem{ bodies };
    }
}

public function main(): Float {
    var system = NBodySystem::create();
    let step = 0.01f;

    system = system.advance(step);
    system = system.advance(step);
    system = system.advance(step);

    return system.energy();

    %%let system_end = Flows::while<(|Nat, NBodySystem|)>((|0n, system_start|), pred(state) => state.0 < iters, fn(state) => [state.0 + 1n, state.1.advance(step)]);
    %%return system_end.1.energy();
}


---

(source_file
  (comment)
  (comment)
  (comment)
  (namespace
    (identifier))
  (entity_declaration
    (custom_type)
    (object_body
      (field_statement
        (variable_expression
          (variable_signature
            (identifier)
            (primitive_type))))
      (field_statement
        (variable_expression
          (variable_signature
            (identifier)
            (primitive_type))))
      (field_statement
        (variable_expression
          (variable_signature
            (identifier)
            (primitive_type))))))
  (entity_declaration
    (custom_type)
    (object_body
      (field_statement
        (variable_expression
          (variable_signature
            (identifier)
            (primitive_type))))
      (field_statement
        (variable_expression
          (variable_signature
            (identifier)
            (primitive_type))))
      (field_statement
        (variable_expression
          (variable_signature
            (identifier)
            (primitive_type))))))
  (entity_declaration
    (custom_type)
    (object_body
      (variable_statement
        (variable_expression
          (variable_signature
            (identifier)
            (primitive_type))
          (variable_assignment
            (binary_expression
              (num_float)
              (namespace_access_expression
                (primitive_type)
                (binary_expression
                  (identifier)
                  (namespace_access_expression
                    (primitive_type)
                    (identifier))))))))
      (variable_statement
        (variable_expression
          (variable_signature
            (identifier)
            (primitive_type))
          (variable_assignment
            (num_float))))
      (field_statement
        (variable_expression
          (variable_signature
            (identifier)
            (primitive_type))))
      (field_statement
        (variable_expression
          (variable_signature
            (identifier)
            (primitive_type))))
      (field_statement
        (variable_expression
          (variable_signature
            (identifier)
            (custom_type))))
      (field_statement
        (variable_expression
          (variable_signature
            (identifier)
            (custom_type))))
      (variable_statement
        (variable_expression
          (variable_signature
            (identifier)
            (custom_type))
          (variable_assignment
            (object_creation
              (custom_type)
              (cstring)
              (binary_expression
                (num_float)
                (namespace_access_expression
                  (custom_type)
                  (identifier)))
              (object_creation
                (custom_type)
                (num_float)
                (num_float)
                (num_float))
              (object_creation
                (custom_type)
                (binary_expression
                  (num_float)
                  (namespace_access_expression
                    (custom_type)
                    (identifier)))
                (binary_expression
                  (num_float)
                  (namespace_access_expression
                    (custom_type)
                    (identifier)))
                (binary_expression
                  (num_float)
                  (namespace_access_expression
                    (custom_type)
                    (identifier))))))))
      (variable_statement
        (variable_expression
          (variable_signature
            (identifier)
            (custom_type))
          (variable_assignment
            (object_creation
              (custom_type)
              (cstring)
              (binary_expression
                (num_float)
                (namespace_access_expression
                  (custom_type)
                  (identifier)))
              (object_creation
                (custom_type)
                (num_float)
                (num_float)
                (num_float))
              (object_creation
                (custom_type)
                (binary_expression
                  (num_float)
                  (namespace_access_expression
                    (custom_type)
                    (identifier)))
                (binary_expression
                  (num_float)
                  (namespace_access_expression
                    (custom_type)
                    (identifier)))
                (binary_expression
                  (num_float)
                  (namespace_access_expression
                    (custom_type)
                    (identifier))))))))
      (variable_statement
        (variable_expression
          (variable_signature
            (identifier)
            (custom_type))
          (variable_assignment
            (object_creation
              (custom_type)
              (cstring)
              (binary_expression
                (num_float)
                (namespace_access_expression
                  (custom_type)
                  (identifier)))
              (object_creation
                (custom_type)
                (num_float)
                (num_float)
                (num_float))
              (object_creation
                (custom_type)
                (binary_expression
                  (num_float)
                  (namespace_access_expression
                    (custom_type)
                    (identifier)))
                (binary_expression
                  (num_float)
                  (namespace_access_expression
                    (custom_type)
                    (identifier)))
                (binary_expression
                  (num_float)
                  (namespace_access_expression
                    (custom_type)
                    (identifier))))))))
      (variable_statement
        (variable_expression
          (variable_signature
            (identifier)
            (custom_type))
          (variable_assignment
            (object_creation
              (custom_type)
              (cstring)
              (binary_expression
                (num_float)
                (namespace_access_expression
                  (custom_type)
                  (identifier)))
              (object_creation
                (custom_type)
                (num_float)
                (num_float)
                (num_float))
              (object_creation
                (custom_type)
                (binary_expression
                  (num_float)
                  (namespace_access_expression
                    (custom_type)
                    (identifier)))
                (binary_expression
                  (num_float)
                  (namespace_access_expression
                    (custom_type)
                    (identifier)))
                (binary_expression
                  (num_float)
                  (namespace_access_expression
                    (custom_type)
                    (identifier))))))))
      (variable_statement
        (variable_expression
          (variable_signature
            (identifier)
            (custom_type))
          (variable_assignment
            (object_creation
              (custom_type)
              (cstring)
              (namespace_access_expression
                (custom_type)
                (identifier))
              (object_creation
                (custom_type)
                (num_float)
                (num_float)
                (num_float))
              (object_creation
                (custom_type)
                (num_float)
                (num_float)
                (num_float))))))
      (method_statement
        (function_signature
          (custom_type)
          (function_parameters
            (variable_expression
              (variable_signature
                (identifier)
                (primitive_type)))
            (variable_expression
              (variable_signature
                (identifier)
                (primitive_type)))
            (variable_expression
              (variable_signature
                (identifier)
                (primitive_type))))
          (function_return_parameters
            (custom_type))
          (function_usage
            (object_body
              (return_statement
                (object_creation
                  (custom_type)
                  (access_expression
                    (this)
                    (identifier))
                  (access_expression
                    (this)
                    (identifier))
                  (access_expression
                    (this)
                    (identifier))
                  (object_creation
                    (custom_type)
                    (binary_expression
                      (unary_expression
                        (identifier))
                      (namespace_access_expression
                        (custom_type)
                        (identifier)))
                    (binary_expression
                      (unary_expression
                        (identifier))
                      (namespace_access_expression
                        (custom_type)
                        (identifier)))
                    (binary_expression
                      (unary_expression
                        (identifier))
                      (namespace_access_expression
                        (custom_type)
                        (identifier))))))))))
      (method_statement
        (function_signature
          (custom_type)
          (function_parameters)
          (function_return_parameters
            (primitive_type))
          (function_usage
            (object_body
              (return_statement
                (access_expression
                  (binary_expression
                    (num_float)
                    (this))
                  (binary_expression
                    (identifier)
                    (parenthesized_expression
                      (namespace_access_expression
                        (primitive_type)
                        (binary_expression
                          (function_call
                            (custom_type)
                            (function_call_parameters
                              (access_expression
                                (access_expression
                                  (this)
                                  (identifier))
                                (identifier))))
                          (namespace_access_expression
                            (primitive_type)
                            (binary_expression
                              (function_call
                                (custom_type)
                                (function_call_parameters
                                  (access_expression
                                    (access_expression
                                      (this)
                                      (identifier))
                                    (identifier))))
                              (namespace_access_expression
                                (primitive_type)
                                (function_call
                                  (custom_type)
                                  (function_call_parameters
                                    (access_expression
                                      (access_expression
                                        (this)
                                        (identifier))
                                      (identifier)))))))))))))))))
      (function_definition
        (function_signature
          (custom_type)
          (function_parameters
            (variable_expression
              (variable_signature
                (identifier)
                (custom_type)))
            (variable_expression
              (variable_signature
                (identifier)
                (custom_type))))
          (function_return_parameters
            (primitive_type))
          (function_usage
            (object_body
              (variable_statement
                (variable_expression
                  (variable_signature
                    (identifier))
                  (variable_assignment
                    (access_expression
                      (access_expression
                        (access_expression
                          (access_expression
                            (identifier)
                            (identifier))
                          (binary_expression
                            (identifier)
                            (identifier)))
                        (identifier))
                      (identifier)))))
              (variable_statement
                (variable_expression
                  (variable_signature
                    (identifier))
                  (variable_assignment
                    (access_expression
                      (access_expression
                        (access_expression
                          (access_expression
                            (identifier)
                            (identifier))
                          (binary_expression
                            (identifier)
                            (identifier)))
                        (identifier))
                      (identifier)))))
              (variable_statement
                (variable_expression
                  (variable_signature
                    (identifier))
                  (variable_assignment
                    (access_expression
                      (access_expression
                        (access_expression
                          (access_expression
                            (identifier)
                            (identifier))
                          (binary_expression
                            (identifier)
                            (identifier)))
                        (identifier))
                      (identifier)))))
              (return_statement
                (namespace_access_expression
                  (primitive_type)
                  (function_call
                    (custom_type)
                    (function_call_parameters
                      (namespace_access_expression
                        (primitive_type)
                        (binary_expression
                          (function_call
                            (custom_type)
                            (function_call_parameters
                              (identifier)))
                          (namespace_access_expression
                            (primitive_type)
                            (binary_expression
                              (function_call
                                (custom_type)
                                (function_call_parameters
                                  (identifier)))
                              (namespace_access_expression
                                (primitive_type)
                                (function_call
                                  (custom_type)
                                  (function_call_parameters
                                    (identifier))))))))))))))))))
  (entity_declaration
    (custom_type)
    (object_body
      (field_statement
        (variable_expression
          (variable_signature
            (identifier)
            (list_type
              (type_params
                (custom_type))))))
      (variable_statement
        (variable_expression
          (variable_signature
            (identifier)
            (list_type
              (type_params
                (list_type
                  (type_params
                    (elist_type
                      (primitive_type)
                      (primitive_type)))))))
          (variable_assignment
            (object_creation
              (list_type
                (type_params
                  (list_type
                    (type_params
                      (elist_type
                        (primitive_type)
                        (primitive_type))))))
              (object_creation
                (list_type
                  (type_params
                    (elist_type
                      (primitive_type)
                      (primitive_type))))
                (elist_value
                  (num_whole)
                  (num_whole))
                (elist_value
                  (num_whole)
                  (num_whole))
                (elist_value
                  (num_whole)
                  (num_whole))
                (elist_value
                  (num_whole)
                  (num_whole)))
              (object_creation
                (list_type
                  (type_params
                    (elist_type
                      (primitive_type)
                      (primitive_type))))
                (elist_value
                  (num_whole)
                  (num_whole))
                (elist_value
                  (num_whole)
                  (num_whole))
                (elist_value
                  (num_whole)
                  (num_whole)))
              (object_creation
                (list_type
                  (type_params
                    (elist_type
                      (primitive_type)
                      (primitive_type))))
                (elist_value
                  (num_whole)
                  (num_whole))
                (elist_value
                  (num_whole)
                  (num_whole)))
              (object_creation
                (list_type
                  (type_params
                    (elist_type
                      (primitive_type)
                      (primitive_type))))
                (elist_value
                  (num_whole)
                  (num_whole)))))))
      (function_definition
        (function_signature
          (custom_type)
          (function_parameters)
          (function_return_parameters
            (custom_type))
          (function_usage
            (object_body
              (variable_statement
                (variable_expression
                  (variable_signature
                    (identifier))
                  (variable_assignment
                    (object_creation
                      (list_type
                        (type_params
                          (custom_type)))
                      (namespace_access_expression
                        (custom_type)
                        (identifier))
                      (namespace_access_expression
                        (custom_type)
                        (identifier))
                      (namespace_access_expression
                        (custom_type)
                        (identifier))
                      (namespace_access_expression
                        (custom_type)
                        (identifier))))))
              (variable_statement
                (variable_expression
                  (variable_signature
                    (identifier))
                  (variable_assignment
                    (access_expression
                      (access_expression
                        (identifier)
                        (function_call
                          (template
                            (custom_type)
                            (type_params
                              (primitive_type)))
                          (function_call_parameters
                            (access_expression
                              (access_expression
                                (access_expression
                                  (lambda_expression
                                    (function_call
                                      (custom_type)
                                      (function_call_parameters
                                        (variable_expression
                                          (variable_signature
                                            (identifier)
                                            (custom_type)))))
                                    (function_return_parameters
                                      (primitive_type))
                                    (identifier))
                                  (identifier))
                                (binary_expression
                                  (identifier)
                                  (identifier)))
                              (identifier)))))
                      (function_call
                        (custom_type)
                        (function_call_parameters))))))
              (variable_statement
                (variable_expression
                  (variable_signature
                    (identifier))
                  (variable_assignment
                    (access_expression
                      (access_expression
                        (identifier)
                        (function_call
                          (template
                            (custom_type)
                            (type_params
                              (primitive_type)))
                          (function_call_parameters
                            (access_expression
                              (access_expression
                                (access_expression
                                  (lambda_expression
                                    (function_call
                                      (custom_type)
                                      (function_call_parameters
                                        (variable_expression
                                          (variable_signature
                                            (identifier)
                                            (custom_type)))))
                                    (function_return_parameters
                                      (primitive_type))
                                    (identifier))
                                  (identifier))
                                (binary_expression
                                  (identifier)
                                  (identifier)))
                              (identifier)))))
                      (function_call
                        (custom_type)
                        (function_call_parameters))))))
              (variable_statement
                (variable_expression
                  (variable_signature
                    (identifier))
                  (variable_assignment
                    (access_expression
                      (access_expression
                        (identifier)
                        (function_call
                          (template
                            (custom_type)
                            (type_params
                              (primitive_type)))
                          (function_call_parameters
                            (access_expression
                              (access_expression
                                (access_expression
                                  (lambda_expression
                                    (function_call
                                      (custom_type)
                                      (function_call_parameters
                                        (variable_expression
                                          (variable_signature
                                            (identifier)
                                            (custom_type)))))
                                    (function_return_parameters
                                      (primitive_type))
                                    (identifier))
                                  (identifier))
                                (binary_expression
                                  (identifier)
                                  (identifier)))
                              (identifier)))))
                      (function_call
                        (custom_type)
                        (function_call_parameters))))))
              (variable_statement
                (variable_expression
                  (variable_signature
                    (identifier))
                  (variable_assignment
                    (object_creation
                      (list_type
                        (type_params
                          (custom_type)))
                      (access_expression
                        (namespace_access_expression
                          (custom_type)
                          (identifier))
                        (function_call
                          (custom_type)
                          (function_call_parameters
                            (identifier)
                            (identifier)
                            (identifier))))
                      (namespace_access_expression
                        (custom_type)
                        (identifier))
                      (namespace_access_expression
                        (custom_type)
                        (identifier))
                      (namespace_access_expression
                        (custom_type)
                        (identifier))
                      (namespace_access_expression
                        (custom_type)
                        (identifier))))))
              (return_statement
                (object_creation
                  (custom_type)
                  (identifier)))))))
      (method_statement
        (function_signature
          (custom_type)
          (function_parameters
            (variable_expression
              (variable_signature
                (identifier)
                (list_type
                  (type_params
                    (elist_type
                      (primitive_type)
                      (primitive_type)))))))
          (function_return_parameters
            (primitive_type))
          (function_usage
            (object_body
              (variable_statement
                (variable_expression
                  (variable_signature
                    (identifier))
                  (variable_assignment
                    (access_expression
                      (identifier)
                      (function_call
                        (template
                          (custom_type)
                          (type_params
                            (primitive_type)))
                        (function_call_parameters
                          (lambda_expression
                            (function_call
                              (custom_type)
                              (function_call_parameters
                                (variable_expression
                                  (variable_signature
                                    (identifier)
                                    (elist_type
                                      (primitive_type)
                                      (primitive_type))))))
                            (function_return_parameters
                              (primitive_type))
                            (object_body
                              (variable_statement
                                (variable_expression
                                  (variable_signature
                                    (identifier))
                                  (variable_assignment
                                    (access_expression
                                      (access_expression
                                        (this)
                                        (identifier))
                                      (function_call
                                        (custom_type)
                                        (function_call_parameters
                                          (access_expression
                                            (identifier)
                                            (num_whole))))))))
                              (variable_statement
                                (variable_expression
                                  (variable_signature
                                    (identifier))
                                  (variable_assignment
                                    (access_expression
                                      (access_expression
                                        (this)
                                        (identifier))
                                      (function_call
                                        (custom_type)
                                        (function_call_parameters
                                          (access_expression
                                            (identifier)
                                            (num_whole))))))))
                              (return_statement
                                (binary_expression
                                  (parenthesized_expression
                                    (access_expression
                                      (access_expression
                                        (identifier)
                                        (binary_expression
                                          (identifier)
                                          (identifier)))
                                      (identifier)))
                                  (namespace_access_expression
                                    (custom_type)
                                    (function_call
                                      (custom_type)
                                      (function_call_parameters
                                        (identifier)
                                        (identifier))))))))))))))
              (return_statement
                (access_expression
                  (identifier)
                  (function_call
                    (custom_type)
                    (function_call_parameters))))))))
      (method_statement
        (function_signature
          (custom_type)
          (function_parameters)
          (function_return_parameters
            (primitive_type))
          (function_usage
            (object_body
              (variable_statement
                (variable_expression
                  (variable_signature
                    (identifier))
                  (variable_assignment
                    (access_expression
                      (access_expression
                        (this)
                        (identifier))
                      (function_call
                        (template
                          (custom_type)
                          (type_params
                            (primitive_type)))
                        (function_call_parameters
                          (access_expression
                            (lambda_expression
                              (function_call
                                (custom_type)
                                (function_call_parameters
                                  (variable_expression
                                    (variable_signature
                                      (identifier)
                                      (custom_type)))))
                              (function_return_parameters
                                (primitive_type))
                              (identifier))
                            (function_call
                              (custom_type)
                              (function_call_parameters)))))))))
              (variable_statement
                (variable_expression
                  (variable_signature
                    (identifier))
                  (variable_assignment
                    (access_expression
                      (namespace_access_expression
                        (custom_type)
                        (identifier))
                      (function_call
                        (template
                          (custom_type)
                          (type_params
                            (primitive_type)))
                        (function_call_parameters
                          (lambda_expression
                            (function_call
                              (custom_type)
                              (function_call_parameters
                                (variable_expression
                                  (variable_signature
                                    (identifier)
                                    (list_type
                                      (type_params
                                        (elist_type
                                          (primitive_type)
                                          (primitive_type))))))))
                            (function_return_parameters
                              (primitive_type))
                            (object_body
                              (return_statement
                                (access_expression
                                  (this)
                                  (function_call
                                    (custom_type)
                                    (function_call_parameters
                                      (identifier)))))))))))))
              (return_statement
                (access_expression
                  (access_expression
                    (identifier)
                    (binary_expression
                      (function_call
                        (custom_type)
                        (function_call_parameters))
                      (identifier)))
                  (function_call
                    (custom_type)
                    (function_call_parameters))))))))
      (method_statement
        (function_signature
          (custom_type)
          (function_parameters
            (variable_expression
              (variable_signature
                (identifier)
                (primitive_type))))
          (function_return_parameters
            (custom_type))
          (function_usage
            (object_body
              (variable_statement
                (variable_expression
                  (variable_signature
                    (identifier))
                  (variable_assignment
                    (access_expression
                      (access_expression
                        (this)
                        (identifier))
                      (function_call
                        (template
                          (custom_type)
                          (type_params
                            (elist_type
                              (custom_type)
                              (primitive_type)
                              (primitive_type)
                              (primitive_type))))
                        (function_call_parameters
                          (lambda_expression
                            (function_call
                              (custom_type)
                              (function_call_parameters
                                (variable_expression
                                  (variable_signature
                                    (identifier)
                                    (custom_type)))))
                            (function_return_parameters
                              (elist_type
                                (custom_type)
                                (primitive_type)
                                (primitive_type)
                                (primitive_type)))
                            (object_body
                              (variable_statement
                                (variable_expression
                                  (variable_signature
                                    (identifier))
                                  (variable_assignment
                                    (access_expression
                                      (access_expression
                                        (this)
                                        (identifier))
                                      (function_call
                                        (template
                                          (custom_type)
                                          (type_params
                                            (elist_type
                                              (primitive_type)
                                              (primitive_type)
                                              (primitive_type))))
                                        (function_call_parameters
                                          (lambda_expression
                                            (function_call
                                              (custom_type)
                                              (function_call_parameters
                                                (variable_expression
                                                  (variable_signature
                                                    (identifier)
                                                    (custom_type)))))
                                            (function_return_parameters
                                              (elist_type
                                                (primitive_type)
                                                (primitive_type)
                                                (primitive_type)))
                                            (object_body
                                              (if_statement
                                                (access_expression
                                                  (access_expression
                                                    (identifier)
                                                    (binary_expression
                                                      (identifier)
                                                      (identifier)))
                                                  (identifier))
                                                (return_statement
                                                  (elist_value
                                                    (num_float)
                                                    (num_float)
                                                    (num_float)))
                                                (variable_statement
                                                  (variable_expression
                                                    (variable_signature
                                                      (identifier))
                                                    (variable_assignment
                                                      (access_expression
                                                        (access_expression
                                                          (access_expression
                                                            (access_expression
                                                              (identifier)
                                                              (identifier))
                                                            (binary_expression
                                                              (identifier)
                                                              (identifier)))
                                                          (identifier))
                                                        (identifier)))))
                                                (variable_statement
                                                  (variable_expression
                                                    (variable_signature
                                                      (identifier))
                                                    (variable_assignment
                                                      (access_expression
                                                        (access_expression
                                                          (access_expression
                                                            (access_expression
                                                              (identifier)
                                                              (identifier))
                                                            (binary_expression
                                                              (identifier)
                                                              (identifier)))
                                                          (identifier))
                                                        (identifier)))))
                                                (variable_statement
                                                  (variable_expression
                                                    (variable_signature
                                                      (identifier))
                                                    (variable_assignment
                                                      (access_expression
                                                        (access_expression
                                                          (access_expression
                                                            (access_expression
                                                              (identifier)
                                                              (identifier))
                                                            (binary_expression
                                                              (identifier)
                                                              (identifier)))
                                                          (identifier))
                                                        (identifier)))))
                                                (variable_statement
                                                  (variable_expression
                                                    (variable_signature
                                                      (identifier))
                                                    (variable_assignment
                                                      (namespace_access_expression
                                                        (custom_type)
                                                        (function_call
                                                          (custom_type)
                                                          (function_call_parameters
                                                            (identifier)
                                                            (identifier)))))))
                                                (variable_statement
                                                  (variable_expression
                                                    (variable_signature
                                                      (identifier))
                                                    (variable_assignment
                                                      (binary_expression
                                                        (identifier)
                                                        (parenthesized_expression
                                                          (binary_expression
                                                            (binary_expression
                                                              (identifier)
                                                              (identifier))
                                                            (identifier)))))))
                                                (return_statement
                                                  (elist_value
                                                    (access_expression
                                                      (binary_expression
                                                        (identifier)
                                                        (identifier))
                                                      (binary_expression
                                                        (identifier)
                                                        (identifier)))
                                                    (access_expression
                                                      (binary_expression
                                                        (identifier)
                                                        (identifier))
                                                      (binary_expression
                                                        (identifier)
                                                        (identifier)))
                                                    (access_expression
                                                      (binary_expression
                                                        (identifier)
                                                        (identifier))
                                                      (binary_expression
                                                        (identifier)
                                                        (identifier))))))))))))))
                              (variable_statement
                                (variable_expression
                                  (variable_signature
                                    (identifier))
                                  (variable_assignment
                                    (access_expression
                                      (access_expression
                                        (access_expression
                                          (access_expression
                                            (identifier)
                                            (identifier))
                                          (binary_expression
                                            (identifier)
                                            (identifier)))
                                        (function_call
                                          (template
                                            (custom_type)
                                            (type_params
                                              (primitive_type)))
                                          (function_call_parameters
                                            (access_expression
                                              (lambda_expression
                                                (function_call
                                                  (custom_type)
                                                  (function_call_parameters
                                                    (variable_expression
                                                      (variable_signature
                                                        (identifier)
                                                        (elist_type
                                                          (primitive_type)
                                                          (primitive_type)
                                                          (primitive_type))))))
                                                (function_return_parameters
                                                  (primitive_type))
                                                (identifier))
                                              (num_whole)))))
                                      (function_call
                                        (custom_type)
                                        (function_call_parameters))))))
                              (variable_statement
                                (variable_expression
                                  (variable_signature
                                    (identifier))
                                  (variable_assignment
                                    (access_expression
                                      (access_expression
                                        (access_expression
                                          (access_expression
                                            (identifier)
                                            (identifier))
                                          (binary_expression
                                            (identifier)
                                            (identifier)))
                                        (function_call
                                          (template
                                            (custom_type)
                                            (type_params
                                              (primitive_type)))
                                          (function_call_parameters
                                            (access_expression
                                              (lambda_expression
                                                (function_call
                                                  (custom_type)
                                                  (function_call_parameters
                                                    (variable_expression
                                                      (variable_signature
                                                        (identifier)
                                                        (elist_type
                                                          (primitive_type)
                                                          (primitive_type)
                                                          (primitive_type))))))
                                                (function_return_parameters
                                                  (primitive_type))
                                                (identifier))
                                              (num_whole)))))
                                      (function_call
                                        (custom_type)
                                        (function_call_parameters))))))
                              (variable_statement
                                (variable_expression
                                  (variable_signature
                                    (identifier))
                                  (variable_assignment
                                    (access_expression
                                      (access_expression
                                        (access_expression
                                          (access_expression
                                            (identifier)
                                            (identifier))
                                          (binary_expression
                                            (identifier)
                                            (identifier)))
                                        (function_call
                                          (template
                                            (custom_type)
                                            (type_params
                                              (primitive_type)))
                                          (function_call_parameters
                                            (access_expression
                                              (lambda_expression
                                                (function_call
                                                  (custom_type)
                                                  (function_call_parameters
                                                    (variable_expression
                                                      (variable_signature
                                                        (identifier)
                                                        (elist_type
                                                          (primitive_type)
                                                          (primitive_type)
                                                          (primitive_type))))))
                                                (function_return_parameters
                                                  (primitive_type))
                                                (identifier))
                                              (num_whole)))))
                                      (function_call
                                        (custom_type)
                                        (function_call_parameters))))))
                              (return_statement
                                (elist_value
                                  (identifier)
                                  (identifier)
                                  (identifier)
                                  (identifier)))))))))))
              (variable_statement
                (variable_expression
                  (variable_signature
                    (identifier))
                  (variable_assignment
                    (access_expression
                      (identifier)
                      (function_call
                        (template
                          (custom_type)
                          (type_params
                            (custom_type)))
                        (function_call_parameters
                          (lambda_expression
                            (function_call
                              (custom_type)
                              (function_call_parameters
                                (variable_expression
                                  (variable_signature
                                    (identifier)
                                    (elist_type
                                      (custom_type)
                                      (primitive_type)
                                      (primitive_type)
                                      (primitive_type))))))
                            (function_return_parameters
                              (custom_type))
                            (object_body
                              (variable_statement
                                (variable_expression
                                  (variable_signature
                                    (identifier))
                                  (variable_assignment
                                    (access_expression
                                      (identifier)
                                      (num_whole)))))
                              (variable_statement
                                (variable_expression
                                  (variable_signature
                                    (identifier))
                                  (variable_assignment
                                    (access_expression
                                      (identifier)
                                      (num_whole)))))
                              (variable_statement
                                (variable_expression
                                  (variable_signature
                                    (identifier))
                                  (variable_assignment
                                    (access_expression
                                      (identifier)
                                      (num_whole)))))
                              (variable_statement
                                (variable_expression
                                  (variable_signature
                                    (identifier))
                                  (variable_assignment
                                    (access_expression
                                      (identifier)
                                      (num_whole)))))
                              (variable_statement
                                (variable_expression
                                  (variable_signature
                                    (identifier))
                                  (variable_assignment
                                    (object_creation
                                      (custom_type)
                                      (identifier)
                                      (identifier)
                                      (identifier)))))
                              (variable_statement
                                (variable_expression
                                  (variable_signature
                                    (identifier))
                                  (variable_assignment
                                    (access_expression
                                      (access_expression
                                        (identifier)
                                        (identifier))
                                      (binary_expression
                                        (identifier)
                                        (parenthesized_expression
                                          (binary_expression
                                            (identifier)
                                            (identifier))))))))
                              (variable_statement
                                (variable_expression
                                  (variable_signature
                                    (identifier))
                                  (variable_assignment
                                    (access_expression
                                      (access_expression
                                        (identifier)
                                        (identifier))
                                      (binary_expression
                                        (identifier)
                                        (parenthesized_expression
                                          (binary_expression
                                            (identifier)
                                            (identifier))))))))
                              (variable_statement
                                (variable_expression
                                  (variable_signature
                                    (identifier))
                                  (variable_assignment
                                    (access_expression
                                      (access_expression
                                        (identifier)
                                        (identifier))
                                      (binary_expression
                                        (identifier)
                                        (parenthesized_expression
                                          (binary_expression
                                            (identifier)
                                            (identifier))))))))
                              (variable_statement
                                (variable_expression
                                  (variable_signature
                                    (identifier))
                                  (variable_assignment
                                    (object_creation
                                      (custom_type)
                                      (identifier)
                                      (identifier)
                                      (identifier)))))
                              (return_statement
                                (object_creation
                                  (custom_type)
                                  (access_expression
                                    (identifier)
                                    (identifier))
                                  (access_expression
                                    (identifier)
                                    (identifier))
                                  (identifier)
                                  (identifier)))))))))))
              (return_statement
                (object_creation
                  (custom_type)
                  (identifier)))))))))
  (function_definition
    (modifier)
    (function_signature
      (custom_type)
      (function_parameters)
      (function_return_parameters
        (primitive_type))
      (function_usage
        (object_body
          (variable_statement
            (variable_expression
              (variable_signature
                (identifier))
              (variable_assignment
                (namespace_access_expression
                  (custom_type)
                  (function_call
                    (custom_type)
                    (function_call_parameters))))))
          (variable_statement
            (variable_expression
              (variable_signature
                (identifier))
              (variable_assignment
                (num_float))))
          (expression_statement
            (access_expression
              (variable_expression
                (variable_signature
                  (identifier))
                (variable_assignment
                  (identifier)))
              (function_call
                (custom_type)
                (function_call_parameters
                  (identifier)))))
          (expression_statement
            (access_expression
              (variable_expression
                (variable_signature
                  (identifier))
                (variable_assignment
                  (identifier)))
              (function_call
                (custom_type)
                (function_call_parameters
                  (identifier)))))
          (expression_statement
            (access_expression
              (variable_expression
                (variable_signature
                  (identifier))
                (variable_assignment
                  (identifier)))
              (function_call
                (custom_type)
                (function_call_parameters
                  (identifier)))))
          (return_statement
            (access_expression
              (identifier)
              (function_call
                (custom_type)
                (function_call_parameters))))
          (comment)
          (comment))))))
